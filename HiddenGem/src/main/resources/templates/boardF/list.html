<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head>
	<header th:replace="~{fragments/base :: head}"></header>
	<style>
		td,
		th {
			text-align: center;
		}
	</style>
	<script th:inline="javascript">
		function search() {
			const field = $('#field').val();
			const query = $('#query').val();
			const uri = '/mid/boardf/list?p=' + [[${ session.currentBoardPage }]] + '&f=' + field + '&q=' + query;
			location.href = encodeURI(uri);
		}
		// 이미지 경로를 설정하여 이미지를 가져오는 함수
		function setImage(index) {
			var imagePath = getImagePath(index);
			document.getElementById(`image${index}`).src = imagePath;
		}

		// 이미지를 가져와서 설정하는 예시 (카드 0부터 3까지 설정)
		for (var i = 0; i < 4; i++) {
			setImage(i);
		}
	</script>
</head>

<body>
	<div th:insert="~{fragments/base :: top}"></div>

	  <div class="container" style="margin-top:80px">
        <div th:each="rowIndex : ${#numbers.sequence(0, 3)}" th:remove="tag">
            <div class="row">
                <div th:each="colIndex : ${#numbers.sequence(rowIndex * 4, rowIndex * 4 + 3)}" th:remove="tag">
                    <div class="col-sm-3 text-white">
                        <div class="card mb-3" style="height: 460px">
                            <!-- 이미지를 동적으로 설정하기 위해 id를 사용하여 이미지 태그를 식별 -->
                            <img class="card-img-top" src="" style="width: 256px; height: 256px">
                            <div class="card-body">
                                <h6 class="card-title" style="text-align: center;" th:text="${boardf[__${colIndex}__].title}"></h6>
                                <hr>
                                <h6 class="card-title" style="text-align: center;" th:text="${boardf[__${colIndex}__].content}"></h6>
                                <hr>
                                <p class="card-text" style="text-align: center;" th:text="${boardf[__${colIndex}__].likeCount}"></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

		<div class="row">
			<div class="col-12">
				<main id="main">
					<!-- 이상 무 -->
					<!-- pagination -->
					<ul class="pagination justify-content-center mt-4">
						<span th:if="${session.currentBoardPage gt 10}">
							<li class="page-item"><a class="page-link"
									th:href="@{/boardf/list(p=${startPage-1},f=${field},q=${query})}"><i
										class="fa-solid fa-less-than"></i></a></li>
						</span>
						<span th:if="${session.currentBoardPage le 10}">
							<li class="page-item"><a class="page-link" href="#"><i class="fa-solid fa-less-than"></i></a></li>
						</span>
						<span th:each="page: ${pageList}">
							<!--<li class="page-item" th:classappend="${session.currentBoardPage eq page ? 'active' : ''}">-->
							<span th:switch="${page}">
								<th:block th:case="${session.currentBoardPage}">
									<li class="page-item active">
										<a class="page-link" href="#">[[${page}]]</a>
									</li>
								</th:block>
								<th:block th:case="*">
									<li class="page-item">
										<a class="page-link" th:href="@{/boardf/list(p=${page},f=${field},q=${query})}">[[${page}]]</a>
									</li>
								</th:block>
							</span>
						</span>
						<span th:if="${totalPages gt endPage}">
							<li class="page-item"><a class="page-link"
									th:href="@{/boardf/list(p=${endPage+1},f=${field},q=${query})}"><i
										class="fa-solid fa-greater-than"></i></a></li>
						</span>
						<span th:if="${totalPages eq endPage}">
							<li class="page-item"><a class="page-link" href="#"><i class="fa-solid fa-greater-than"></i></a></li>
						</span>
					</ul>
				</main>
			</div>
		</div>
	</div>

	<footer th:replace="~{fragments/base :: bottom}"></footer>
</body>

</html>